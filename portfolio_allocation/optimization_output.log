============================================================
LOADING TRAINED MODELS
============================================================
Loading buy model from: /Users/diegocancino/Desktop/QR-landry_branch (right data )/combined_buy_sell_model/buy_model.joblib
Buy model loaded successfully
Loading sell model from: /Users/diegocancino/Desktop/QR-landry_branch (right data )/combined_buy_sell_model/sell_model.joblib
Sell model loaded successfully
ML models loaded successfully
================================================================================
OPTIMIZING PORTFOLIO ALLOCATION STRATEGY
================================================================================

Fetching data and computing signals (this may take a moment)...

Getting predictions using EXACT same method as combined_buy_sell_model...
============================================================
LOADING TRAINED MODELS
============================================================
Loading buy model from: /Users/diegocancino/Desktop/QR-landry_branch (right data )/combined_buy_sell_model/buy_model.joblib
Buy model loaded successfully
Loading sell model from: /Users/diegocancino/Desktop/QR-landry_branch (right data )/combined_buy_sell_model/sell_model.joblib
Sell model loaded successfully
Fetching data for NVDA from 2024-01-02 to 2025-07-25...

Fetching data for NVDA from 2024-01-02 to 2025-07-25
Computing buy side features...
Computing buy side features...
Computing sell side features...
Computing sell side features...

Signals Generated:
   Buy signals (Predicted_Dip=True): 35
   Sell signals (Sell_Signal=True): 26
Data loaded: 391 rows

Testing 120 parameter combinations...
This may take a few minutes...

  Progress: 10/120 (8.3%)
  Progress: 20/120 (16.7%)
  Progress: 30/120 (25.0%)
  Progress: 40/120 (33.3%)
  Progress: 50/120 (41.7%)
  Progress: 60/120 (50.0%)
  Progress: 70/120 (58.3%)
  Progress: 80/120 (66.7%)
  Progress: 90/120 (75.0%)
  Progress: 100/120 (83.3%)
  Progress: 110/120 (91.7%)
  Progress: 120/120 (100.0%)

================================================================================
TOP 10 STRATEGIES BY TOTAL RETURN
================================================================================
 buy_size_pct  sell_base_pct sell_formula  max_sell_pct  total_return  final_capital  sharpe_ratio  max_drawdown  num_trades  buy_trades  sell_trades  position_pct
         0.05          150.0          cap          0.50      0.666346  166634.592431      1.185641      0.283833          58          32           26     51.223706
         0.05          150.0          div          0.50      0.666346  166634.592431      1.185641      0.283833          58          32           26     51.223706
         0.05          150.0          cap          1.00      0.658796  165879.569867      1.206033      0.274316          58          32           26     50.193849
         0.05          150.0          div          1.00      0.658796  165879.569867      1.206033      0.274316          58          32           26     50.193849
         0.05          150.0          cap          0.75      0.656364  165636.406059      1.177710      0.282985          58          32           26     51.223735
         0.05          150.0          div          0.75      0.656364  165636.406059      1.177710      0.282985          58          32           26     51.223735
         0.04          125.0          div          0.50      0.654836  165483.590036      1.230133      0.256027          61          35           26     57.430073
         0.04          125.0          cap          0.50      0.654836  165483.590036      1.230133      0.256027          61          35           26     57.430073
         0.04          150.0          cap          0.50      0.650748  165074.816822      1.276802      0.238530          61          35           26     50.011820
         0.04          150.0          div          0.50      0.650748  165074.816822      1.276802      0.238530          61          35           26     50.011820

All results saved to: optimization_results.csv

================================================================================
BEST STRATEGY
================================================================================
Buy Size: 5.0% of capital
Sell Base: 150.0%
Sell Formula: cap
Max Sell: 50.0%

Performance:
  Total Return: 66.63%
  Final Capital: $166,634.59
  Sharpe Ratio: 1.186
  Max Drawdown: 28.38%
  Total Trades: 58
  Final Position: 51.2%

Optimization complete!

To use the best strategy, update your parameters:
  buy_size_pct=0.05
  sell_base_pct=150.0
  sell_formula='cap'
  max_sell_pct=0.5
